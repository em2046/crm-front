<article class="page">
  <form class="edit-from" [formGroup]="editForm" (ngSubmit)="onSubmit(editForm.value)">
    <mat-form-field>
      <mat-label>编号</mat-label>
      <input matInput placeholder="Username" [value]="data.uuid" disabled />
    </mat-form-field>

    <mat-form-field>
      <mat-label>用户名</mat-label>
      <input formControlName="name" matInput placeholder="Username" />
      <mat-icon matSuffix>person</mat-icon>
      <mat-hint align="end">4-200个字符</mat-hint>
      <mat-error *ngIf="name.invalid">
        {{ Utils.getValidateMessage(name, '用户名') }}
      </mat-error>
    </mat-form-field>

    <mat-form-field>
      <mat-label>邮箱地址</mat-label>
      <input
        formControlName="email"
        matInput
        placeholder="Email"
        type="email"
      />
      <mat-icon matSuffix>email</mat-icon>
      <mat-hint align="end">请输入可以接受邮件的邮箱</mat-hint>
      <mat-error *ngIf="email.invalid">
        {{ Utils.getValidateMessage(email, '邮箱地址') }}
      </mat-error>
    </mat-form-field>

    <mat-form-field>
      <mat-label>真实姓名</mat-label>
      <input formControlName="realName" matInput placeholder="Real name" />
      <mat-hint align="end">请输入中文名</mat-hint>
      <mat-error *ngIf="realName.invalid">
        {{ Utils.getValidateMessage(realName, '真实姓名') }}
      </mat-error>
    </mat-form-field>

    <mat-form-field>
      <mat-chip-list #chipList aria-label="角色选择器">
        <mat-chip
          *ngFor="let role of selectedRoles"
          [selectable]="selectable"
          [removable]="removable"
          (removed)="remove(role)"
        >
          {{ role.title }}
          <mat-icon matChipRemove *ngIf="removable">cancel</mat-icon>
        </mat-chip>
        <input
          placeholder="角色..."
          #roleInput
          [formControl]="rolesCtrl"
          [matAutocomplete]="auto"
          [matChipInputFor]="chipList"
          [matChipInputSeparatorKeyCodes]="separatorKeysCodes"
          [matChipInputAddOnBlur]="addOnBlur"
          (matChipInputTokenEnd)="add($event)"
        />
        <mat-icon matSuffix>face</mat-icon>
      </mat-chip-list>
      <mat-autocomplete
        #auto="matAutocomplete"
        (optionSelected)="selected($event)"
      >
        <mat-option *ngFor="let role of filteredRoles | async" [value]="role">
          {{ role.title }}
        </mat-option>
      </mat-autocomplete>
    </mat-form-field>

    <button mat-flat-button color="primary" type="submit">
      <mat-icon>save</mat-icon>
      <span>保存</span>
      <mat-spinner *ngIf="saveLoading" color="primary"></mat-spinner>
    </button>
  </form>
</article>
